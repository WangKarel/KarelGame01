<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>坦克大战模型v1.06</title>
    <link rel="stylesheet" type="text/css" href="css/float.css" />
    <link rel="stylesheet" type="text/css" href="css/tank.css" />
    <link rel="stylesheet" type="text/css" href="css/burnLight.css" />
    <script type="text/javascript" src="js/jquery.js"></script>
</head>
<body>
<script type="text/javascript">
    $(function () {
        let divObj = document.getElementById("divId");
        let divObj2 = document.getElementById("divId2");
        let bloodTip = document.getElementById('bloodTip');
        let bloodTip2 = document.getElementById('bloodTip2');
        let blood = document.getElementById("blood");
        let blood2 = document.getElementById("blood2");
        let shootObj = document.getElementById("shootId");
        let bodyObj = document.getElementById("bodyId");
        let shootObj2 = document.getElementById("shootId2");
        let bodyObj2 = document.getElementById("bodyId2");
        let moveFasterObj = document.getElementById("moveFaster");
        let shootFasterObj = document.getElementById("shootFaster");
        let moveOppositeObj = document.getElementById("moveOpposite");
        let getPillObj = document.getElementById("getPill");
        let wheelObj1 = document.getElementById("wheelId1");
        let wheelObj2 = document.getElementById("wheelId2");
        let wheelObj3 = document.getElementById("wheelId3");
        let wheelObj4 = document.getElementById("wheelId4");
        let burnLightXObj = document.getElementById("burnLightX");
        let top = false, bottom = false, left = false, right = false;
        let top2 = false, bottom2 = false, left2 = false, right2 = false;
        //定义变量保存div方位
        let flag = 1, flag2 = 1;//1:top  2:right  3:bottom  4:left
        //定义变量保存坦克状态
        let state = 0,state2 = 0;//0:正常移动   1：可对角移动
        //页面宽度和高度
        let winWidth = parseInt($(".father").css("width"));
        let winHeight = parseInt($(".father").css("height"));

        let zidanSpeed1 = 12, zidanSpeed2 = 12;
        //定义变量判断坦克是否被子弹击中
        let ifShoot = 0,ifShoot2 = 0;//0：没有击中   1：被击中
        //1号坦克子弹移动
        function zidanfeiTop() {
            let zidanTop = $("#zidanDiv1");
            //alert(zidanTop.get(0).offsetTop+":"+zidanTop.css("top"))
            if (zidanTop.get(0) !== undefined) {
                if (zidanTop.get(0).offsetTop <= -20) {
                    zidanTop.remove();
                } else {
                    zidanTop.animate({top: "-="+zidanSpeed1+"px", left: "-=0px"}, 20, "linear", function () {
                        let divObj2Top = divObj2.offsetTop;
                        let divObj2Left = divObj2.offsetLeft;
                        let zidanObjTop = zidanTop.offset().top;
                        let zidanObjLeft = zidanTop.offset().left;
                        if (divObj2Left+120 > zidanObjLeft+10 && zidanObjLeft+10 > divObj2Left && divObj2Top+130 > zidanObjTop+20 && zidanObjTop+20 > divObj2Top) {
                            zidanTop.remove();
                            //子弹击中坦克2
                            if ($(blood2).css("width") === "27px") {
                                $(bloodTip2).css("display","none");
                                divObj2.style.animation = "rotate 500ms linear 1";
                                setTimeout(function () {
                                    divObj2.style.display = "none";
                                    $(".cover").css("display","block");
                                    $(".message").css("display","block");
                                },480);
                                let seconds = 4;
                                setInterval(function () {
                                    seconds--;
                                    if (seconds >= 0)
                                        $(".message").find("h3").html('重新开始('+seconds+'s)');
                                    else window.location.reload();
                                },1000)
                            }else if ($(blood2).css("width") === "54px") {
                                $(blood2).css("width","27px");
                                ifShoot2 = 1;
                                divObj2.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj2.style.animation = "none";
                                    ifShoot2 = 0;
                                },1200)
                            }else if ($(blood2).css("width") === "81px") {
                                $(blood2).css("width","54px");
                                ifShoot2 = 1;
                                divObj2.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj2.style.animation = "none";
                                    ifShoot2 = 0;
                                },1200)
                            }
                        }
                    });
                }
            }
        }
        function zidanfeiRight() {
            let zidanRight = $("#zidanDiv2");
            if (zidanRight.get(0) !== undefined) {
                if (winWidth - zidanRight.get(0).offsetLeft <= -20) {
                    zidanRight.remove();
                } else {
                    zidanRight.animate({left: "+="+zidanSpeed1+"px", top: "-=0px"}, 20, "linear", function () {
                        let divObj2Top = divObj2.offsetTop;
                        let divObj2Left = divObj2.offsetLeft;
                        let zidanObjTop = zidanRight.offset().top;
                        let zidanObjLeft = zidanRight.offset().left;
                        if (divObj2Left+130 > zidanObjLeft+20 && zidanObjLeft+20 > divObj2Left && divObj2Top+120 > zidanObjTop+10 && zidanObjTop+10 > divObj2Top) {
                            zidanRight.remove();
                            //子弹击中坦克2
                            if ($(blood2).css("width") === "27px") {
                                $(bloodTip2).css("display","none");
                                divObj2.style.animation = "rotate 500ms linear 1";
                                setTimeout(function () {
                                    divObj2.style.display = "none";
                                    $(".cover").css("display","block");
                                    $(".message").css("display","block");
                                },480);
                                let seconds = 4;
                                setInterval(function () {
                                    seconds--;
                                    if (seconds >= 0)
                                        $(".message").find("h3").html('重新开始('+seconds+'s)');
                                    else window.location.reload();
                                },1000)
                            }else if ($(blood2).css("width") === "54px") {
                                $(blood2).css("width","27px");
                                ifShoot2 = 1;
                                divObj2.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj2.style.animation = "none";
                                    ifShoot2 = 0;
                                },1200)
                            }else if ($(blood2).css("width") === "81px") {
                                $(blood2).css("width","54px");
                                ifShoot2 = 1;
                                divObj2.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj2.style.animation = "none";
                                    ifShoot2 = 0;
                                },1200)
                            }
                        }
                    });
                }
            }
        }
        function zidanfeiBottom() {
            let zidanBottom = $("#zidanDiv3");
            if (zidanBottom.get(0) !== undefined) {
                if (winHeight - zidanBottom.get(0).offsetTop <= -20) {
                    zidanBottom.remove();
                } else {
                    zidanBottom.animate({top: "+="+zidanSpeed1+"px", left: "-=0px"}, 20, "linear", function () {
                        let divObj2Top = divObj2.offsetTop;
                        let divObj2Left = divObj2.offsetLeft;
                        let zidanObjTop = zidanBottom.offset().top;
                        let zidanObjLeft = zidanBottom.offset().left;
                        if (divObj2Left+120 > zidanObjLeft+10 && zidanObjLeft+10 > divObj2Left && divObj2Top+130 > zidanObjTop+20 && zidanObjTop+20 > divObj2Top) {
                            zidanBottom.remove();
                            //子弹击中坦克2
                            if ($(blood2).css("width") === "27px") {
                                $(bloodTip2).css("display","none");
                                divObj2.style.animation = "rotate 500ms linear 1";
                                setTimeout(function () {
                                    divObj2.style.display = "none";
                                    $(".cover").css("display","block");
                                    $(".message").css("display","block");
                                },480);
                                let seconds = 4;
                                setInterval(function () {
                                    seconds--;
                                    if (seconds >= 0)
                                        $(".message").find("h3").html('重新开始('+seconds+'s)');
                                    else window.location.reload();
                                },1000)
                            }else if ($(blood2).css("width") === "54px") {
                                $(blood2).css("width","27px");
                                ifShoot2 = 1;
                                divObj2.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj2.style.animation = "none";
                                    ifShoot2 = 0;
                                },1200)
                            }else if ($(blood2).css("width") === "81px") {
                                $(blood2).css("width","54px");
                                ifShoot2 = 1;
                                divObj2.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj2.style.animation = "none";
                                    ifShoot2 = 0;
                                },1200)
                            }
                        }
                    });
                }
            }
        }
        function zidanfeiLeft() {
            let zidanLeft = $("#zidanDiv4");
            if (zidanLeft.get(0) !== undefined) {
                if (zidanLeft.get(0).offsetLeft <= -20) {
                    zidanLeft.remove();
                } else {
                    zidanLeft.animate({left: "-="+zidanSpeed1+"px", top: "-=0px"}, 20, "linear", function () {
                        let divObj2Top = divObj2.offsetTop;
                        let divObj2Left = divObj2.offsetLeft;
                        let zidanObjTop = zidanLeft.offset().top;
                        let zidanObjLeft = zidanLeft.offset().left;
                        if (divObj2Left+130 > zidanObjLeft+20 && zidanObjLeft+20 > divObj2Left && divObj2Top+120 > zidanObjTop+10 && zidanObjTop+10 > divObj2Top) {
                            zidanLeft.remove();
                            //子弹击中坦克2
                            if ($(blood2).css("width") === "27px") {
                                $(bloodTip2).css("display","none");
                                divObj2.style.animation = "rotate 500ms linear 1";
                                setTimeout(function () {
                                    divObj2.style.display = "none";
                                    $(".cover").css("display","block");
                                    $(".message").css("display","block");
                                },480);
                                let seconds = 4;
                                setInterval(function () {
                                    seconds--;
                                    if (seconds >= 0)
                                        $(".message").find("h3").html('重新开始('+seconds+'s)');
                                    else window.location.reload();
                                },1000)
                            }else if ($(blood2).css("width") === "54px") {
                                $(blood2).css("width","27px");
                                ifShoot2 = 1;
                                divObj2.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj2.style.animation = "none";
                                    ifShoot2 = 0;
                                },1200)
                            }else if ($(blood2).css("width") === "81px") {
                                $(blood2).css("width","54px");
                                ifShoot2 = 1;
                                divObj2.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj2.style.animation = "none";
                                    ifShoot2 = 0;
                                },1200)
                            }
                        }
                    });
                }
            }
        }

        //2号坦克子弹移动
        function zidanfeiTop2() {
            let zidanTop = $("#zidanDiv5");
            if (zidanTop.get(0) !== undefined) {
                if (zidanTop.get(0).offsetTop < -20) {
                    zidanTop.remove();
                } else {
                    zidanTop.animate({top: "-="+zidanSpeed2+"px", left: "-=0px"}, 20, "linear", function () {
                        let divObjTop = divObj.offsetTop;
                        let divObjLeft = divObj.offsetLeft;
                        let zidanObjTop = zidanTop.offset().top;
                        let zidanObjLeft = zidanTop.offset().left;
                        if (divObjLeft+120 > zidanObjLeft+10 && zidanObjLeft+10 > divObjTop && divObjTop+130 > zidanObjTop+20 && zidanObjTop+20 > divObjTop) {
                            zidanTop.remove();
                            //子弹击中坦克2
                            if ($(blood).css("width") === "27px") {
                                $(bloodTip).css("display","none");
                                divObj.style.animation = "rotate 500ms linear 1";
                                setTimeout(function () {
                                    divObj.style.display = "none";
                                    $(".cover").css("display","block");
                                    $(".message").css("display","block");
                                },480);
                                let seconds = 4;
                                setInterval(function () {
                                    seconds--;
                                    if (seconds >= 0)
                                        $(".message").find("h3").html('重新开始('+seconds+'s)');
                                    else window.location.reload();
                                },1000)
                            }else if ($(blood).css("width") === "54px") {
                                $(blood).css("width","27px");
                                ifShoot = 1;
                                divObj.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj.style.animation = "none";
                                    ifShoot = 0;
                                },1200)
                            }else if ($(blood).css("width") === "81px") {
                                $(blood).css("width","54px");
                                ifShoot = 1;
                                divObj.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj.style.animation = "none";
                                    ifShoot = 0;
                                },1200)
                            }
                        }
                    });
                }
            }
        }
        function zidanfeiRight2() {
            let zidanRight = $("#zidanDiv6");
            if (zidanRight.get(0) !== undefined) {
                if (winWidth - zidanRight.get(0).offsetLeft <= -20) {
                    zidanRight.remove();
                } else {
                    zidanRight.animate({left: "+="+zidanSpeed2+"px", top: "-=0px"}, 20, "linear", function () {
                        let divObjTop = divObj.offsetTop;
                        let divObjLeft = divObj.offsetLeft;
                        let zidanObjTop = zidanRight.offset().top;
                        let zidanObjLeft = zidanRight.offset().left;
                        if (divObjLeft+130 > zidanObjLeft+20 && zidanObjLeft+20 > divObjLeft && divObjTop+120 > zidanObjTop+10 && zidanObjTop+10 > divObjTop) {
                            zidanRight.remove();
                            //子弹击中坦克2
                            if ($(blood).css("width") === "27px") {
                                $(bloodTip).css("display","none");
                                divObj.style.animation = "rotate 500ms linear 1";
                                setTimeout(function () {
                                    divObj.style.display = "none";
                                    $(".cover").css("display","block");
                                    $(".message").css("display","block");
                                },480);
                                let seconds = 4;
                                setInterval(function () {
                                    seconds--;
                                    if (seconds >= 0)
                                        $(".message").find("h3").html('重新开始('+seconds+'s)');
                                    else window.location.reload();
                                },1000)
                            }else if ($(blood).css("width") === "54px") {
                                $(blood).css("width","27px");
                                ifShoot = 1;
                                divObj.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj.style.animation = "none";
                                    ifShoot = 0;
                                },1200)
                            }else if ($(blood).css("width") === "81px") {
                                $(blood).css("width","54px");
                                ifShoot = 1;
                                divObj.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj.style.animation = "none";
                                    ifShoot = 0;
                                },1200)
                            }
                        }
                    });
                }
            }
        }
        function zidanfeiBottom2() {
            let zidanBottom = $("#zidanDiv7");
            if (zidanBottom.get(0) !== undefined) {
                if (winHeight - zidanBottom.get(0).offsetTop <= -20) {
                    zidanBottom.remove();
                } else {
                    zidanBottom.animate({top: "+="+zidanSpeed2+"px", left: "-=0px"}, 20, "linear", function () {
                        let divObjTop = divObj.offsetTop;
                        let divObjLeft = divObj.offsetLeft;
                        let zidanObjTop = zidanBottom.offset().top;
                        let zidanObjLeft = zidanBottom.offset().left;
                        if (divObjLeft+120 > zidanObjLeft+10 && zidanObjLeft+10 > divObjLeft && divObjTop+130 > zidanObjTop+20 && zidanObjTop+20 > divObjTop) {
                            zidanBottom.remove();
                            //子弹击中坦克2
                            if ($(blood).css("width") === "27px") {
                                $(bloodTip).css("display","none");
                                divObj.style.animation = "rotate 500ms linear 1";
                                setTimeout(function () {
                                    divObj.style.display = "none";
                                    $(".cover").css("display","block");
                                    $(".message").css("display","block");
                                },480);
                                let seconds = 4;
                                setInterval(function () {
                                    seconds--;
                                    if (seconds >= 0)
                                        $(".message").find("h3").html('重新开始('+seconds+'s)');
                                    else window.location.reload();
                                },1000)
                            }else if ($(blood).css("width") === "54px") {
                                $(blood).css("width","27px");
                                ifShoot = 1;
                                divObj.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj.style.animation = "none";
                                    ifShoot = 0;
                                },1200)
                            }else if ($(blood).css("width") === "81px") {
                                $(blood).css("width","54px");
                                ifShoot = 1;
                                divObj.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj.style.animation = "none";
                                    ifShoot = 0;
                                },1200)
                            }
                        }
                    });
                }
            }
        }
        function zidanfeiLeft2() {
            let zidanLeft = $("#zidanDiv8");
            if (zidanLeft.get(0) !== undefined) {
                if (zidanLeft.get(0).offsetLeft <= -20) {
                    zidanLeft.remove();
                } else {
                    zidanLeft.animate({left: "-=12px", top: "-=0px"}, zidanSpeed2, "linear", function () {
                        let divObjTop = divObj.offsetTop;
                        let divObjLeft = divObj.offsetLeft;
                        let zidanObjTop = zidanLeft.offset().top;
                        let zidanObjLeft = zidanLeft.offset().left;
                        if (divObjLeft+130 > zidanObjLeft+20 && zidanObjLeft+20 > divObjLeft && divObjTop+120 > zidanObjTop+10 && zidanObjTop+10 > divObjTop) {
                            zidanLeft.remove();
                            //子弹击中坦克2
                            if ($(blood).css("width") === "27px") {
                                $(bloodTip).css("display","none");
                                divObj.style.animation = "rotate 500ms linear 1";
                                setTimeout(function () {
                                    divObj.style.display = "none";
                                    $(".cover").css("display","block");
                                    $(".message").css("display","block");
                                },480);
                                let seconds = 4;
                                setInterval(function () {
                                    seconds--;
                                    if (seconds >= 0)
                                        $(".message").find("h3").html('重新开始('+seconds+'s)');
                                    else window.location.reload();
                                },1000)
                            }else if ($(blood).css("width") === "54px") {
                                $(blood).css("width","27px");
                                ifShoot = 1;
                                divObj.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj.style.animation = "none";
                                    ifShoot = 0;
                                },1200)
                            }else if ($(blood).css("width") === "81px") {
                                $(blood).css("width","54px");
                                ifShoot = 1;
                                divObj.style.animation = "isShooted 400ms linear infinite";
                                setTimeout(function () {
                                    divObj.style.animation = "none";
                                    ifShoot = 0;
                                },1200)
                            }
                        }
                    });
                }
            }
        }

        //坦克移动方向控制（1号:w s a d    2号：↑ ↓ ← →）
        $(document).keydown(function (event) {
            //keydown和keyup事件中event.which用于获取键值，event.keyCode已过时
            let keyNum = event.which;
            /**
             * 这里可能同时会按下两个方向键，所以不能只判断一个就立刻break，改用if判断，但是又不能删掉switch判断，
             * 因为多方向键判断仅仅在加强功能之后开启，当处于非加强状态时仍然采用switch判断
             * 解决方法：设置一个变量保存当前对象所处的状态，0：正常状态；1：加强状态。即当这个变量为0时，走switch，为1时，走if。
             */
            switch (keyNum) {
                case 65:
                    left = true;
                    break;
                case 87:
                    top = true;
                    break;
                case 68:
                    right = true;
                    break;
                case 83:
                    bottom = true;
                    break;
            }
        });
        $(document).keydown(function (event) {
            let keyNum = event.which;
            switch (keyNum) {
                case 38:
                    top2 = true;
                    break;
                case 39:
                    right2 = true;
                    break;
                case 40:
                    bottom2 = true;
                    break;
                case 37:
                    left2 = true;
                    break;
            }
        });

        $(document).keyup(function (event) {
            let keyNum2 = event.which;
            switch (keyNum2) {
                case 65:
                    left = false;
                    break;
                case 87:
                    top = false;
                    break;
                case 68:
                    right = false;
                    break;
                case 83:
                    bottom = false;
                    break;
            }
        });
        $(document).keyup(function (event) {
            let keyNum = event.which;
            switch (keyNum) {
                case 38:
                    top2 = false;
                    break;
                case 39:
                    right2 = false;
                    break;
                case 40:
                    bottom2 = false;
                    break;
                case 37:
                    left2 = false;
                    break;
            }
        });

        //子弹发射按钮（1号：k   2号：enter）
        $(document).keypress(function (event) {
            let keyNum = event.which;
            //alert(keyNum)
            if (keyNum === 107) {
                //获取divId的位置
                let divObjTop = $(divObj).offset().top;
                let divObjLeft = $(divObj).offset().left;
                switch (flag) {
                    case 1:
                        if ($("#zidanDiv1").get(0) === undefined) {
                            //设置子弹的位置
                            $(".father").append('<div id="zidanDiv1" style="margin: 0;width: 10px;height: 20px;border-radius: 50%;background-color:red;' +
                                'visibility: visible;position: relative;' +
                                'top: ' + (divObjTop - 20) + 'px;' +
                                'left: ' + (divObjLeft + 50) + 'px"></div>');
                        }
                        //发射子弹
                        setInterval(zidanfeiTop, 30);
                        break;
                    case 2:
                        if ($("#zidanDiv2").get(0) === undefined) {
                            //设置子弹的位置
                            $(".father").append('<div id="zidanDiv2" style="margin: 0;width: 20px;height: 10px;border-radius: 50%;background-color:red;' +
                                'visibility: visible;position: relative;' +
                                'top: ' + (divObjTop + 50) + 'px;' +
                                'left: ' + (divObjLeft + 110) + 'px"></div>');
                        }
                        //发射子弹
                        setInterval(zidanfeiRight, 30);
                        break;
                    case 3:
                        if ($("#zidanDiv3").get(0) === undefined) {
                            //设置子弹的位置
                            $(".father").append('<div id="zidanDiv3" style="margin: 0;width: 10px;height: 20px;border-radius: 50%;background-color:red;' +
                                'visibility: visible;position: relative;' +
                                'top: ' + (divObjTop + 110) + 'px;' +
                                'left: ' + (divObjLeft + 50) + 'px"></div>');
                        }
                        //发射子弹
                        setInterval(zidanfeiBottom, 30);
                        break;
                    case 4:
                        if ($("#zidanDiv4").get(0) === undefined) {
                            //设置子弹的位置
                            $(".father").append('<div id="zidanDiv4" style="margin: 0;width: 20px;height: 10px;border-radius: 50%;background-color:red;' +
                                'visibility: visible;position: relative;' +
                                'top: ' + (divObjTop + 50) + 'px;' +
                                'left: ' + (divObjLeft - 20) + 'px"></div>');
                        }
                        //发射子弹
                        setInterval(zidanfeiLeft, 30);
                        break;
                }
            }
        });
        $(document).keypress(function (event) {
            let keyNum = event.which;
            if (keyNum === 13) {
                //获取divId的位置
                let divObjTop = $(divObj2).offset().top;
                let divObjLeft = $(divObj2).offset().left;
                switch (flag2) {
                    case 1:
                        //设置子弹的位置
                        if ($("#zidanDiv5").get(0) === undefined) {//当第一颗子弹消失之后才能发射第二颗子弹
                            $(".father").append('<div id="zidanDiv5" style="margin: 0;width: 10px;height: 20px;border-radius: 50%;background-color:black;' +
                                'visibility: visible;position: relative;' +
                                'top: ' + (divObjTop - 20) + 'px;' +
                                'left: ' + (divObjLeft + 50) + 'px"></div>');
                            //发射子弹
                            setInterval(zidanfeiTop2, 30);
                        }
                        break;
                    case 2:
                        if ($("#zidanDiv6").get(0) === undefined) {
                            //设置子弹的位置
                            $(".father").append('<div id="zidanDiv6" style="margin: 0;width: 20px;height: 10px;border-radius: 50%;background-color:black;' +
                                'visibility: visible;position: relative;' +
                                'top: ' + (divObjTop + 50) + 'px;' +
                                'left: ' + (divObjLeft + 110) + 'px"></div>');
                        }
                        //发射子弹
                        setInterval(zidanfeiRight2, 30);
                        break;
                    case 3:
                        if ($("#zidanDiv7").get(0) === undefined) {
                            //设置子弹的位置
                            $(".father").append('<div id="zidanDiv7" style="margin: 0;width: 10px;height: 20px;border-radius: 50%;background-color:black;' +
                                'visibility: visible;position: relative;' +
                                'top: ' + (divObjTop + 110) + 'px;' +
                                'left: ' + (divObjLeft + 50) + 'px"></div>');
                        }
                        //发射子弹
                        setInterval(zidanfeiBottom2, 30);
                        break;
                    case 4:
                        if ($("#zidanDiv8").get(0) === undefined) {
                            //设置子弹的位置
                            $(".father").append('<div id="zidanDiv8" style="margin: 0;width: 20px;height: 10px;border-radius: 50%;background-color:black;' +
                                'visibility: visible;position: relative;' +
                                'top: ' + (divObjTop + 50) + 'px;' +
                                'left: ' + (divObjLeft - 20) + 'px"></div>');
                        }
                        //发射子弹
                        setInterval(zidanfeiLeft2, 30);
                        break;
                }
            }
        });


        let wheelSpeed1 = 6, wheelSpeed2 = 6;
        //坦克移动
        let moveNum1 = setInterval(function () {
            //判断是否被击中，如果被击中，则此过程无法移动和旋转
            if (ifShoot === 0) {
                if (left && !top && !bottom && !right) {
                    //这里的旋转角度都是相对原始位置而言的
                    $("#divId").css("transform", "rotate(270deg)");
                    if (parseInt($(divObj).css("left")) < wheelSpeed1) {
                        /**
                         * animate用于改变参数属性，与其他改变属性方法不同，animate是动态改变，其他的为瞬时改变；
                         * animate第二个参数为延时，当animate在定时器中使用的时候一定要加上第二个参数，且数值必须小于定时器延时
                         * 否则定时器无效或延时错误
                         */
                        $(divObj).animate({left: "-=0px"}, 1);
                    } else {
                        $(divObj).animate({left: "-=" + wheelSpeed1 + "px"}, 20, "linear", cashBoth);
                        $(bloodTip).animate({left: "-=" + wheelSpeed1 + "px"}, 20, "linear");
                    }
                    flag = 4;
                } else if (left && top && !bottom && !right) {
                    if (state === 1) {
                        $("#divId").css("transform", "rotate(315deg)");
                        if (parseInt($(divObj).css("left")) < wheelSpeed1 || parseInt($(divObj).css("top")) < wheelSpeed1) {
                            $(divObj).animate({left: "-=0px", top: "-=0px"}, 1);
                        } else {
                            $(divObj).animate({
                                left: "-=" + (wheelSpeed1-3) + "px",
                                top: "-=" + (wheelSpeed1-3) + "px"
                            }, 20, "linear", cashBoth);
                            $(bloodTip).animate({
                                left: "-=" + (wheelSpeed1-3) + "px",
                                top: "-=" + (wheelSpeed1-3) + "px"
                            }, 20, "linear");
                        }
                        flag = 0;
                    } else {
                        //这里的旋转角度都是相对原始位置而言的
                        $("#divId").css("transform", "rotate(270deg)");
                        if (parseInt($(divObj).css("left")) < wheelSpeed1) {
                            $(divObj).animate({left: "-=0px"}, 1);
                        } else {
                            $(divObj).animate({left: "-=" + wheelSpeed1 + "px"}, 20, "linear", cashBoth);
                            $(bloodTip).animate({left: "-=" + wheelSpeed1 + "px"}, 20, "linear");
                        }
                        flag = 4;
                    }
                } else if (left && bottom && !top && !right) {
                    if (state === 1) {
                        $("#divId").css("transform", "rotate(225deg)");
                        if (parseInt($(divObj).css("left")) < wheelSpeed1 || parseInt(winHeight - $(divObj).offset().top - 110) < wheelSpeed1) {
                            $(divObj).animate({left: "-=0px", top: "+=0px"}, 1);
                        } else {
                            $(divObj).animate({
                                left: "-=" + (wheelSpeed1-3) + "px",
                                top: "+=" + (wheelSpeed1-3) + "px"
                            }, 20, "linear", cashBoth);
                            $(bloodTip).animate({
                                left: "-=" + (wheelSpeed1-3) + "px",
                                top: "+=" + (wheelSpeed1-3) + "px"
                            }, 20, "linear");
                        }
                        flag = 0;
                    } else {
                        $("#divId").css("transform", "rotate(180deg)");
                        if (parseInt(winHeight - $(divObj).offset().top - 110) < wheelSpeed1) {
                            $(divObj).animate({top: "+=0px"}, 1);
                        } else {
                            $(divObj).animate({top: "+=" + wheelSpeed1 + "px"}, 20, "linear", cashBoth);
                            $(bloodTip).animate({top: "+=" + wheelSpeed1 + "px"}, 20, "linear");
                        }
                        flag = 3;
                    }
                } else if (top && !left && !right && !bottom) {
                    $("#divId").css("transform", "rotate(0)");
                    if (parseInt($(divObj).css("top")) < wheelSpeed1) {
                        $(divObj).animate({top: "-=0px"}, 1);
                    } else {
                        $(divObj).animate({top: "-=" + wheelSpeed1 + "px"}, 20, "linear", cashBoth);
                        $(bloodTip).animate({top: "-=" + wheelSpeed1 + "px"}, 20, "linear");
                    }
                    flag = 1;
                } else if (top && right && !left && !bottom) {
                    if (state === 1) {
                        $("#divId").css("transform", "rotate(45deg)");
                        if (parseInt($(divObj).css("top")) < wheelSpeed1 || parseInt(winWidth - $(divObj).offset().left - 110) < wheelSpeed1) {
                            $(divObj).animate({left: "+=0px", top: "-=0px"}, 1);
                        } else {
                            $(divObj).animate({
                                left: "+=" + (wheelSpeed1-3) + "px",
                                top: "-=" + (wheelSpeed1-3) + "px"
                            }, 20, "linear", cashBoth);
                            $(bloodTip).animate({
                                left: "+=" + (wheelSpeed1-3) + "px",
                                top: "-=" + (wheelSpeed1-3) + "px"
                            }, 20, "linear");
                        }
                        flag = 0;
                    } else {
                        $("#divId").css("transform", "rotate(0)");
                        if (parseInt($(divObj).css("top")) < wheelSpeed1) {
                            $(divObj).animate({top: "-=0px"}, 1);
                        } else {
                            $(divObj).animate({top: "-=" + wheelSpeed1 + "px"}, 20, "linear", cashBoth);
                            $(bloodTip).animate({top: "-=" + wheelSpeed1 + "px"}, 20, "linear");
                        }
                        flag = 1;
                    }
                } else if (right && !left && !bottom && !top) {
                    $("#divId").css("transform", "rotate(90deg)");
                    if (parseInt(winWidth - $(divObj).offset().left - 110) < wheelSpeed1) {
                        $(divObj).animate({left: "+=0px"}, 1);
                    } else {
                        $(divObj).animate({left: "+=" + wheelSpeed1 + "px"}, 20, "linear", cashBoth);
                        $(bloodTip).animate({left: "+=" + wheelSpeed1 + "px"}, 20, "linear");
                    }
                    flag = 2;
                } else if (right && bottom && !top && !left) {
                    if (state === 1) {
                        $("#divId").css("transform", "rotate(135deg)");
                        if (parseInt(winWidth - $(divObj).offset().left - 110) < wheelSpeed1 || parseInt(winHeight - $(divObj).offset().top - 110) < wheelSpeed1) {
                            $(divObj).animate({left: "+=0px", top: "-=0px"}, 1);
                        } else {
                            $(divObj).animate({
                                left: "+=" + (wheelSpeed1-3) + "px",
                                top: "+=" + (wheelSpeed1-3) + "px"
                            }, 20, "linear", cashBoth);
                            $(bloodTip).animate({
                                left: "+=" + (wheelSpeed1-3) + "px",
                                top: "+=" + (wheelSpeed1-3) + "px"
                            }, 20, "linear");
                        }
                        flag = 0;
                    } else {
                        $("#divId").css("transform", "rotate(90deg)");
                        if (parseInt(winWidth - $(divObj).offset().left - 110) < wheelSpeed1) {
                            $(divObj).animate({left: "+=0px"}, 1);
                        } else {
                            $(divObj).animate({left: "+=" + wheelSpeed1 + "px"}, 20, "linear", cashBoth);
                            $(bloodTip).animate({left: "+=" + wheelSpeed1 + "px"}, 20, "linear");
                        }
                        flag = 2;
                    }
                } else if (bottom && !left && !right && !top) {
                    $("#divId").css("transform", "rotate(180deg)");
                    if (parseInt(winHeight - $(divObj).offset().top - 110) < wheelSpeed1) {
                        $(divObj).animate({top: "+=0px"}, 1);
                    } else {
                        $(divObj).animate({top: "+=" + wheelSpeed1 + "px"}, 20, "linear", cashBoth);
                        $(bloodTip).animate({top: "+=" + wheelSpeed1 + "px"}, 20, "linear");
                    }
                    flag = 3;
                }
            }
        }, 50);
        let moveNum2 = setInterval(function () {
            if (ifShoot2 === 0) {
                if (left2 && !top2 && !bottom2 && !right2) {
                    //这里的旋转角度都是相对原始位置而言的
                    $("#divId2").css("transform", "rotate(270deg)");
                    if (parseInt($(divObj2).css("left")) < wheelSpeed2) {
                        $(divObj2).animate({left: "-=0px"}, 1);
                    } else {
                        $(divObj2).animate({left: "-=" + wheelSpeed2 + "px"}, 20, "linear", cashBoth);
                        $(bloodTip2).animate({left: "-=" + wheelSpeed2 + "px"}, 20, "linear");
                    }
                    flag2 = 4;
                } else if (left2 && top2 && !bottom2 && !right2) {
                    if (state2 === 1) {
                        $("#divId2").css("transform", "rotate(315deg)");
                        if (parseInt($(divObj2).css("left")) < wheelSpeed2 || parseInt($(divObj2).css("top")) < wheelSpeed2) {
                            $(divObj2).animate({left: "-=0px", top: "-=0px"}, 1);
                        } else {
                            $(divObj2).animate({
                                left: "-=" + (wheelSpeed2-3) + "px",
                                top: "-=" + (wheelSpeed2-3) + "px"
                            }, 20, "linear", cashBoth);
                            $(bloodTip2).animate({
                                left: "-=" + (wheelSpeed2-3) + "px",
                                top: "-=" + (wheelSpeed2-3) + "px"
                            }, 20, "linear");
                        }
                        flag2 = 0;
                    }else {
                        //这里的旋转角度都是相对原始位置而言的
                        $("#divId2").css("transform", "rotate(270deg)");
                        if (parseInt($(divObj2).css("left")) < wheelSpeed2) {
                            $(divObj2).animate({left: "-=0px"}, 1);
                        } else {
                            $(divObj2).animate({left: "-=" + wheelSpeed2 + "px"}, 20, "linear", cashBoth);
                            $(bloodTip2).animate({left: "-=" + wheelSpeed2 + "px"}, 20, "linear");
                        }
                        flag2 = 4;
                    }
                } else if (left2 && bottom2 && !top2 && !right2) {
                    if (state2 === 1) {
                        $("#divId2").css("transform", "rotate(225deg)");
                        if (parseInt($(divObj2).css("left")) < wheelSpeed2 || parseInt(winHeight - $(divObj2).offset().top - 110) < wheelSpeed2) {
                            $(divObj2).animate({left: "-=0px", top: "+=0px"}, 1);
                        } else {
                            $(divObj2).animate({
                                left: "-=" + (wheelSpeed2-3) + "px",
                                top: "+=" + (wheelSpeed2-3) + "px"
                            }, 20, "linear", cashBoth);
                            $(bloodTip2).animate({
                                left: "-=" + (wheelSpeed2-3) + "px",
                                top: "+=" + (wheelSpeed2-3) + "px"
                            }, 20, "linear");
                        }
                        flag2 = 0;
                    } else {
                        $("#divId2").css("transform", "rotate(180deg)");
                        if (parseInt(winHeight - $(divObj2).offset().top - 110) < wheelSpeed2) {
                            $(divObj2).animate({top: "+=0px"}, 1);
                        } else {
                            $(divObj2).animate({top: "+=" + wheelSpeed2 + "px"}, 20, "linear", cashBoth);
                            $(bloodTip2).animate({top: "+=" + wheelSpeed2 + "px"}, 20, "linear");
                        }
                        flag2 = 3;
                    }
                } else if (top2 && !left2 && !right2 && !bottom2) {
                    $("#divId2").css("transform", "rotate(0)");
                    if (parseInt($(divObj2).css("top")) < wheelSpeed2) {
                        $(divObj2).animate({top: "-=0px"}, 1);
                    } else {
                        $(divObj2).animate({top: "-=" + wheelSpeed2 + "px"}, 20, "linear", cashBoth);
                        $(bloodTip2).animate({top: "-=" + wheelSpeed2 + "px"}, 20, "linear");
                    }
                    flag2 = 1;
                } else if (top2 && right2 && !left2 && !bottom2) {
                    if (state2 === 1) {
                        $("#divId2").css("transform", "rotate(45deg)");
                        if (parseInt($(divObj2).css("top")) < wheelSpeed2 || parseInt(winWidth - $(divObj2).offset().left - 110) < wheelSpeed2) {
                            $(divObj2).animate({left: "+=0px", top: "-=0px"}, 1);
                        } else {
                            $(divObj2).animate({
                                left: "+=" + (wheelSpeed2-3) + "px",
                                top: "-=" + (wheelSpeed2-3) + "px"
                            }, 20, "linear", cashBoth);
                            $(bloodTip2).animate({
                                left: "+=" + (wheelSpeed2-3) + "px",
                                top: "-=" + (wheelSpeed2-3) + "px"
                            }, 20, "linear");
                        }
                        flag2 = 0;
                    } else {
                        $("#divId2").css("transform", "rotate(0)");
                        if (parseInt($(divObj2).css("top")) < wheelSpeed2) {
                            $(divObj2).animate({top: "-=0px"}, 1);
                        } else {
                            $(divObj2).animate({top: "-=" + wheelSpeed2 + "px"}, 20, "linear", cashBoth);
                            $(bloodTip2).animate({top: "-=" + wheelSpeed2 + "px"}, 20, "linear");
                        }
                        flag2 = 1;
                    }
                } else if (right2 && !left2 && !bottom2 && !top2) {
                    $("#divId2").css("transform", "rotate(90deg)");
                    if (parseInt(winWidth - $(divObj2).offset().left - 110) < wheelSpeed2) {
                        $(divObj2).animate({left: "+=0px"}, 1);
                    } else {
                        $(divObj2).animate({left: "+=" + wheelSpeed2 + "px"}, 20, "linear", cashBoth);
                        $(bloodTip2).animate({left: "+=" + wheelSpeed2 + "px"}, 20, "linear");
                    }
                    flag2 = 2;
                } else if (right2 && bottom2 && !top2 && !left2) {
                    if (state2 === 1) {
                        $("#divId2").css("transform", "rotate(135deg)");
                        if (parseInt(winWidth - $(divObj2).offset().left - 110) < wheelSpeed2 || parseInt(winHeight - $(divObj2).offset().top - 110) < wheelSpeed2) {
                            $(divObj2).animate({left: "+=0px", top: "-=0px"}, 1);
                        } else {
                            $(divObj2).animate({
                                left: "+=" + (wheelSpeed2-3) + "px",
                                top: "+=" + (wheelSpeed2-3) + "px"
                            }, 20, "linear", cashBoth);
                            $(bloodTip2).animate({
                                left: "+=" + (wheelSpeed2-3) + "px",
                                top: "+=" + (wheelSpeed2-3) + "px"
                            }, 20, "linear");
                        }
                        flag2 = 0;
                    } else {
                        $("#divId2").css("transform", "rotate(90deg)");
                        if (parseInt(winWidth - $(divObj2).offset().left - 110) < wheelSpeed2) {
                            $(divObj2).animate({left: "+=0px"}, 1);
                        } else {
                            $(divObj2).animate({left: "+=" + wheelSpeed2 + "px"}, 20, "linear", cashBoth);
                            $(bloodTip2).animate({left: "+=" + wheelSpeed2 + "px"}, 20, "linear");
                        }
                        flag2 = 2;
                    }
                } else if (bottom2 && !left2 && !right2 && !top2) {
                    $("#divId2").css("transform", "rotate(180deg)");
                    if (parseInt(winHeight - $(divObj2).offset().top - 110) < wheelSpeed2) {
                        $(divObj2).animate({top: "+=0px"}, 1);
                    } else {
                        $(divObj2).animate({top: "+=" + wheelSpeed2 + "px"}, 20, "linear", cashBoth);
                        $(bloodTip2).animate({top: "+=" + wheelSpeed2 + "px"}, 20, "linear");
                    }
                    flag2 = 3;
                }
            }
        }, 50);

        let floatTime1 = 60, floatTime2 = 60;
        //流动虚线框（1号）
        setInterval(function () {
            let $left = parseInt($(".dashed-top").css("left"));
            let $top = parseInt($(".dashed-bottom").css("left"));
            if ($left < 0) {
                $left += 2;
            } else {
                $left = -1400;
            }

            if ($top > -1000) {
                $top -= 2;
            } else {
                $top = 0;
            }
            $(".dashed-top").css("left", $left + "px");
            $(".dashed-right").css("top", $left + "px");
            $(".dashed-bottom").css("left", $top + "px");
            $(".dashed-left").css("top", $top + "px");
        }, floatTime1);
        //流动虚线框（2号）
        setInterval(function () {
            let $left = parseInt($(".dashed-top2").css("left"));
            let $top = parseInt($(".dashed-bottom2").css("left"));
            if ($left < 0) {
                $left += 2;
            } else {
                $left = -1400;
            }

            if ($top > -1000) {
                $top -= 2;
            } else {
                $top = 0;
            }
            $(".dashed-top2").css("left", $left + "px");
            $(".dashed-right2").css("top", $left + "px");
            $(".dashed-bottom2").css("left", $top + "px");
            $(".dashed-left2").css("top", $top + "px");
        }, floatTime2);
        //流动虚线框（加强效果moveFaster）
        setInterval(function () {
            let $left = parseInt($(".dashed-top3").css("left"));
            let $top = parseInt($(".dashed-bottom3").css("left"));
            if ($left < 0) {
                $left += 2;
            } else {
                $left = -1400;
            }

            if ($top > -1000) {
                $top -= 2;
            } else {
                $top = 0;
            }
            $(".dashed-top3").css("left", $left + "px");
            $(".dashed-right3").css("top", $left + "px");
            $(".dashed-bottom3").css("left", $top + "px");
            $(".dashed-left3").css("top", $top + "px");
        }, 80);
        //流动虚线框（加强效果shootFaster）
        setInterval(function () {
            let $left = parseInt($(".dashed-top4").css("left"));
            let $top = parseInt($(".dashed-bottom4").css("left"));
            if ($left < 0) {
                $left += 2;
            } else {
                $left = -1400;
            }

            if ($top > -1000) {
                $top -= 2;
            } else {
                $top = 0;
            }
            $(".dashed-top4").css("left", $left + "px");
            $(".dashed-right4").css("top", $left + "px");
            $(".dashed-bottom4").css("left", $top + "px");
            $(".dashed-left4").css("top", $top + "px");
        }, 80);
        //流动虚线框（加强效果moveOpposite）
        setInterval(function () {
            let $left = parseInt($(".dashed-top5").css("left"));
            let $top = parseInt($(".dashed-bottom5").css("left"));
            if ($left < 0) {
                $left += 2;
            } else {
                $left = -1400;
            }

            if ($top > -1000) {
                $top -= 2;
            } else {
                $top = 0;
            }
            $(".dashed-top5").css("left", $left + "px");
            $(".dashed-right5").css("top", $left + "px");
            $(".dashed-bottom5").css("left", $top + "px");
            $(".dashed-left5").css("top", $top + "px");
        }, 80);
        //流动虚线框（加强效果getPill）
        setInterval(function () {
            let $left = parseInt($(".dashed-top6").css("left"));
            let $top = parseInt($(".dashed-bottom6").css("left"));
            if ($left < 0) {
                $left += 2;
            } else {
                $left = -1400;
            }

            if ($top > -1000) {
                $top -= 2;
            } else {
                $top = 0;
            }
            $(".dashed-top6").css("left", $left + "px");
            $(".dashed-right6").css("top", $left + "px");
            $(".dashed-bottom6").css("left", $top + "px");
            $(".dashed-left6").css("top", $top + "px");
        }, 80);

        //随机加强效果
        let move60 = "",move100 = "",shoot60 = "",shoot100 = "",moveOPP = "",addBlood = "";
        setInterval(function () {
            let times = 8;
            let chars = Math.floor(Math.random() * 6);//0-4整数
            //alert(chars);
            if (chars % 5 === 0) {//移速+60%
                $(moveFasterObj).css({
                    display:"block",
                    width:"60px",
                    height:"60px"
                });
                $(moveFasterObj).find("h5").text("移速+60%");
                $(moveFasterObj).find(".moveFaster").text("(7s)");
                moveFasterObj.style.left = Math.random() * (winWidth - 100) + "px";
                moveFasterObj.style.top = Math.random() * (winHeight - 100) + "px";
                //alert(moveFasterObj.offsetTop+":"+ moveFasterObj.style.top)
                //设置定时器，每隔一段时间判断坦克和加强div是否有重叠
                move60 = setInterval(getMoveSpeed, 40);
                //设置每秒减1,7s后消失
                let sing = setInterval(function () {
                    times--;
                    if (times >= 0) $(moveFasterObj).find(".moveFaster").text("("+times+"s)");
                    else {
                        $(moveFasterObj).css("display", "none");
                        clearInterval(sing);
                    }
                },1000)
            } else if (chars % 5 === 1) {//射速+60%
                $(shootFasterObj).css({
                    display:"block",
                    width:"60px",
                    height:"60px"
                });
                $(shootFasterObj).find("h5").text("射速+60%");
                $(shootFasterObj).find(".shootFaster").text("(7s)");
                shootFasterObj.style.left = Math.random() * (winWidth - 100) + "px";
                shootFasterObj.style.top = Math.random() * (winHeight - 100) + "px";
                //alert(shootFasterObj.offsetTop+":"+ shootFasterObj.style.top)
                shoot60 = setInterval(getShootSpeed, 40);
                //设置每秒减1,7s后消失
                let sing = setInterval(function () {
                    times--;
                    if (times >= 0) $(shootFasterObj).find(".shootFaster").text("("+times+"s)");
                    else {
                        $(shootFasterObj).css("display", "none");
                        clearInterval(sing);
                    }
                },1000)
            } else if (chars % 5 === 2) {//移速+100%
                $(moveFasterObj).css({
                    display:"block",
                    width:"60px",
                    height:"60px"
                });
                $(moveFasterObj).find("h5").text("移速+100%");
                $(moveFasterObj).find(".moveFaster").text("(7s)");
                moveFasterObj.style.left = Math.random() * (winWidth - 100) + "px";
                moveFasterObj.style.top = Math.random() * (winHeight - 100) + "px";
                //alert(moveFasterObj.offsetTop+":"+ moveFasterObj.style.top)
                //设置定时器，每隔一段时间判断坦克和加强div是否有重叠
                move100 = setInterval(getMoveSpeed2, 40);
                //设置每秒减1,7s后消失
                let sing = setInterval(function () {
                    times--;
                    if (times >= 0) $(moveFasterObj).find(".moveFaster").text("("+times+"s)");
                    else {
                        $(moveFasterObj).css("display", "none");
                        clearInterval(sing);
                    }
                },1000)
            } else if (chars % 5 === 3) {//射速+100%
                $(shootFasterObj).css({
                    display:"block",
                    width:"60px",
                    height:"60px"
                });
                $(shootFasterObj).find("h5").text("射速+100%");
                $(shootFasterObj).find(".shootFaster").text("(7s)");
                shootFasterObj.style.left = Math.random() * (winWidth - 100) + "px";
                shootFasterObj.style.top = Math.random() * (winHeight - 100) + "px";
                //alert(shootFasterObj.offsetTop+":"+ shootFasterObj.style.top)
                shoot100 = setInterval(getShootSpeed2, 40);
                //设置每秒减1,7s后消失
                let sing = setInterval(function () {
                    times--;
                    if (times >= 0) $(shootFasterObj).find(".shootFaster").text("("+times+"s)");
                    else {
                        $(shootFasterObj).css("display", "none");
                        clearInterval(sing);
                    }
                },1000)
            }else if (chars % 5 === 4) {//对角移动
                $(moveOppositeObj).css({
                    display:"block",
                    width:"60px",
                    height:"60px"
                });
                $(moveOppositeObj).find("h5").text("对角移动");
                $(moveOppositeObj).find(".moveOpposite").text("(7s)");
                moveOppositeObj.style.left = Math.random() * (winWidth - 100) + "px";
                moveOppositeObj.style.top = Math.random() * (winHeight - 100) + "px";
                //alert(moveOppositeObj.offsetTop+":"+ moveOppositeObj.style.top)
                moveOPP = setInterval(getMoveAcross, 40);
                //设置每秒减1,7s后消失
                let sing = setInterval(function () {
                    times--;
                    if (times >= 0) $(moveOppositeObj).find(".moveOpposite").text("("+times+"s)");
                    else {
                        $(moveOppositeObj).css("display", "none");
                        clearInterval(sing);
                    }
                },1000)
            }else if (chars % 5 === 5) {//回血
                $(getPillObj).css({
                    display:"block",
                    width:"60px",
                    height:"60px"
                });
                $(getPillObj).find("h5").text("回复生命");
                $(getPillObj).find(".getPill").text("(7s)");
                getPillObj.style.left = Math.random() * (winWidth - 100) + "px";
                getPillObj.style.top = Math.random() * (winHeight - 100) + "px";
                addBlood = setInterval(getBlood, 40);
                //设置每秒减1,10s后消失
                let sing = setInterval(function () {
                    times--;
                    if (times >= 0) $(getPillObj).find(".getPill").text("("+times+"s)");
                    else {
                        $(getPillObj).css("display", "none");
                        clearInterval(sing);
                    }
                },1000)
            }
        }, 16000);

        //随机激光效果
        setInterval(function () {
            let chars = Math.floor(Math.random() * 7) + 1;//1-7整数
            $(burnLightXObj).css("display","block");
            burnLightXObj.style.left = Math.random() * (winWidth - 100) + "px";
            let rand = Math.random();
            if (rand > 0.5) {
                burnLightXObj.style.top = "0px";
            }
            switch (chars) {
                case 1:
                    $(burnLightXObj).css("background-color","#B21016");
                    burnLightXObj.style.animation = "light1 1000ms linear infinite";
                    setTimeout(function () {
                        lightStart();
                    },2000);
                    break;
                case 2:
                    $(burnLightXObj).css("background-color","#BF5B16");
                    burnLightXObj.style.animation = "light2 800ms linear infinite";
                    setTimeout(function () {
                        lightStart();
                    },2000);
                    break;
                case 3:
                    $(burnLightXObj).css("background-color","#138535");
                    burnLightXObj.style.animation = "light3 1000ms linear infinite";
                    setTimeout(function () {
                        lightStart();
                    },2000);
                    break;
                case 4:
                    $(burnLightXObj).css("background-color","#007AAE");
                    burnLightXObj.style.animation = "light4 1000ms linear infinite";
                    setTimeout(function () {
                        lightStart();
                    },2000);
                    break;
                case 5:
                    $(burnLightXObj).css("background-color","#232B99");
                    burnLightXObj.style.animation = "light5 1000ms linear infinite";
                    setTimeout(function () {
                        lightStart();
                    },2000);
                    break;
                case 6:
                    $(burnLightXObj).css("background-color","#7A297B");
                    burnLightXObj.style.animation = "light6 1000ms linear infinite";
                    setTimeout(function () {
                        lightStart();
                    },2000);
                    break;
                case 7:
                    $(burnLightXObj).css("background-color","#BFB500");
                    burnLightXObj.style.animation = "light7 1000ms linear infinite";
                    setTimeout(function () {
                        lightStart();
                    },2000);
                    break;
            }
        },10000);

        //1号2号相撞
        function cashBoth() {
            let divObjTop = divObj.offsetTop;
            let divObjLeft = divObj.offsetLeft;
            let divObj2Top = divObj2.offsetTop;
            let divObj2Left = divObj2.offsetLeft;
            if (divObj2Left+220 >= divObjLeft+110 && divObjLeft+110 >= divObj2Left && divObj2Top+220 >= divObjTop+110 && divObjTop+110 >= divObj2Top) {
                //坦克相撞
                //alert("1号和2号相撞阵亡");
                clearInterval(moveNum1);
                clearInterval(moveNum2);
                divObj.style.animation = "rotate 500ms linear 1";
                divObj2.style.animation = "rotate 500ms linear 1";
                setTimeout(function () {
                    divObj.style.display = "none";
                    divObj2.style.display = "none";
                    $(".cover").css("display","block");
                    $(".message").css("display","block");
                },480);
                let seconds = 4;
                setInterval(function () {
                    seconds--;
                    if (seconds >= 0)
                    $(".message").find("h3").html('重新开始('+seconds+'s)');
                    else window.location.reload();
                },1000)
            }
        }

        //获得移速加强
        function getMoveSpeed() {
            //判断1号坦克是否有重叠
            let topObj1 = divObj.offsetTop;
            let leftObj1 = divObj.offsetLeft;
            let topObj2 = divObj2.offsetTop;
            let leftObj2 = divObj2.offsetLeft;
            let topMoveObj = moveFasterObj.offsetTop;
            let leftMoveObj = moveFasterObj.offsetLeft;
            if (topMoveObj+170 > topObj1+110 && topObj1+110 > topMoveObj && leftMoveObj+170 > leftObj1+110 && leftObj1+110 > leftMoveObj && moveFasterObj.style.display==="block") {
                //alert("准备加移速60%");
                clearInterval(move60);
                //1号坦克和加强div有重叠
                $(moveFasterObj).css("transform", "scale(1.5)");
                $(moveFasterObj).css("transform", "scale(0.1)");
                setTimeout(function () {
                    moveFasterObj.style.display = "none";
                },300);
                //增加坦克外观效果
                floatTime1 = 30;
                wheelSpeed1 = 10;
                /**
                 * animation：动画效果属性: 参数1：动画绑定名称，默认为none,可在css中通过设置@keyframes来定义动画类型
                 *                        参数2：动画周期，默认为0，即无效果,可设置秒和毫秒值
                 *                        参数3：动画速度曲线，默认为ease(开始和结束变慢，中间快)，linear(从头到尾速度相同)
                 *                        参数4：动画播放次数n，默认为0，即不播放，infinite：无限次播放
                 * @type {string}
                 */
                wheelObj1.style.animation = "wheelMove 20ms linear infinite";
                wheelObj2.style.animation = "wheelMove 20ms linear infinite";
                setTimeout(function () {//加强效果持续10s
                    //去掉外观效果
                    floatTime1 = 60;
                    wheelSpeed1 = 6;
                    wheelObj1.style.animation = "none";
                    wheelObj2.style.animation = "none";
                }, 10000)
            } else if (topMoveObj+170 > topObj2+110 && topObj2+110 > topMoveObj && leftMoveObj+170 > leftObj2+110 && leftObj2+110 > leftMoveObj && moveFasterObj.style.display==="block") {
                //alert("准备加移速60%");
                clearInterval(move60);
                //2号坦克和加强div有重叠
                $(moveFasterObj).css("transform", "scale(1.5)");
                $(moveFasterObj).css("transform", "scale(0.1)");
                setTimeout(function () {
                    moveFasterObj.style.display = "none";
                },300);
                //增加坦克外观效果
                floatTime2 = 30;
                wheelSpeed2 = 10;
                wheelObj3.style.animation = "wheelMove2 20ms linear infinite";
                wheelObj4.style.animation = "wheelMove2 20ms linear infinite";
                setTimeout(function () {//加强效果持续10s
                    //去掉外观效果
                    floatTime2 = 60;
                    wheelSpeed2 = 6;
                    wheelObj3.style.animation = "none";
                    wheelObj4.style.animation = "none";
                }, 10000)
            }
        }
        function getMoveSpeed2() {
            //判断1号坦克是否有重叠
            let topObj1 = divObj.offsetTop;
            let leftObj1 = divObj.offsetLeft;
            let topObj2 = divObj2.offsetTop;
            let leftObj2 = divObj2.offsetLeft;
            let topMoveObj = moveFasterObj.offsetTop;
            let leftMoveObj = moveFasterObj.offsetLeft;
            if (topMoveObj+170 > topObj1+110 && topObj1+110 > topMoveObj && leftMoveObj+170 > leftObj1+110 && leftObj1+110 > leftMoveObj && moveFasterObj.style.display==="block") {
                //alert("准备加移速100%");
                clearInterval(move100);
                //1号坦克和加强div有重叠
                $(moveFasterObj).css("transform", "scale(1.5)");
                $(moveFasterObj).css("transform", "scale(0.1)");
                setTimeout(function () {
                    moveFasterObj.style.display = "none";
                },300);
                //增加坦克外观效果
                floatTime1 = 30;
                wheelSpeed1 = 12;
                wheelObj1.style.animation = "wheelMove 20ms linear infinite";
                wheelObj2.style.animation = "wheelMove 20ms linear infinite";
                setTimeout(function () {//加强效果持续10s
                    //去掉外观效果
                    floatTime1 = 60;
                    wheelSpeed1 = 6;
                    wheelObj1.style.animation = "none";
                    wheelObj2.style.animation = "none";
                }, 10000)
            } else if (topMoveObj+170 > topObj2+110 && topObj2+110 > topMoveObj && leftMoveObj+170 > leftObj2+110 && leftObj2+110 > leftMoveObj && moveFasterObj.style.display==="block") {
                //alert("准备加移速100%");
                clearInterval(move100);
                //2号坦克和加强div有重叠
                $(moveFasterObj).css("transform", "scale(1.5)");
                $(moveFasterObj).css("transform", "scale(0.1)");
                setTimeout(function () {
                    moveFasterObj.style.display = "none";
                },300);
                //增加坦克外观效果
                floatTime2 = 30;
                wheelSpeed2 = 12;
                wheelObj3.style.animation = "wheelMove2 20ms linear infinite";
                wheelObj4.style.animation = "wheelMove2 20ms linear infinite";
                setTimeout(function () {//加强效果持续10s
                    //去掉外观效果
                    floatTime2 = 60;
                    wheelSpeed2 = 6;
                    wheelObj3.style.animation = "none";
                    wheelObj4.style.animation = "none";
                }, 10000)
            }
        }

        //获得射速加强
        function getShootSpeed() {
            //判断1号坦克是否有重叠
            let topObj1 = divObj.offsetTop;
            let leftObj1 = divObj.offsetLeft;
            let topObj2 = divObj2.offsetTop;
            let leftObj2 = divObj2.offsetLeft;
            let topShootObj = shootFasterObj.offsetTop;
            let leftShootObj = shootFasterObj.offsetLeft;
            if (topShootObj+170 > topObj1+110 && topObj1+110 > topShootObj && leftShootObj+170 > leftObj1+110 && leftObj1+110 > leftShootObj && shootFasterObj.style.display==="block") {
                //alert("准备加射速60%");
                clearInterval(shoot60);
                //1号坦克和加强div有重叠
                $(shootFasterObj).css("transform", "scale(1.5)");
                $(shootFasterObj).css("transform", "scale(0.1)");
                setTimeout(function () {
                    shootFasterObj.style.display = "none";
                },300);
                shootFasterObj.style.display = "none";
                //增加坦克外观效果
                zidanSpeed1 = 19;
                shootObj.style.animation = "mymove 20ms linear infinite";
                setTimeout(function () {//加强效果持续10s
                    //去掉外观效果
                    zidanSpeed1 = 12;
                    shootObj.style.animation = "none";
                }, 10000)
            } else if (topShootObj+170 > topObj2+110 && topObj2+110 > topShootObj && leftShootObj+170 > leftObj2+110 && leftObj2+110 > leftShootObj && shootFasterObj.style.display==="block") {
                //alert("准备加射速60%");
                clearInterval(shoot60);
                //2号坦克和加强div有重叠
                $(shootFasterObj).css("transform", "scale(1.5)");
                $(shootFasterObj).css("transform", "scale(0.1)");
                setTimeout(function () {
                    shootFasterObj.style.display = "none";
                },300);
                //增加坦克外观效果
                zidanSpeed2 = 19;
                shootObj2.style.animation = "mymove2 20ms linear infinite";
                setTimeout(function () {//加强效果持续10s
                    //去掉外观效果
                    zidanSpeed2 = 12;
                    shootObj2.style.animation = "none";
                }, 10000)
            }
        }
        function getShootSpeed2() {
            //判断1号坦克是否有重叠
            let topObj1 = divObj.offsetTop;
            let leftObj1 = divObj.offsetLeft;
            let topObj2 = divObj2.offsetTop;
            let leftObj2 = divObj2.offsetLeft;
            let topShootObj = shootFasterObj.offsetTop;
            let leftShootObj = shootFasterObj.offsetLeft;
            if (topShootObj+170 > topObj1+110 && topObj1+110 > topShootObj && leftShootObj+170 > leftObj1+110 && leftObj1+110 > leftShootObj && shootFasterObj.style.display==="block") {
                //alert("准备加射速100%");
                clearInterval(shoot100);
                //1号坦克和加强div有重叠
                $(shootFasterObj).css("transform", "scale(1.5)");
                $(shootFasterObj).css("transform", "scale(0.1)");
                setTimeout(function () {
                    shootFasterObj.style.display = "none";
                },300);
                //增加坦克外观效果
                zidanSpeed1 = 24;
                shootObj.style.animation = "mymove 20ms linear infinite";
                setTimeout(function () {//加强效果持续10s
                    //去掉外观效果
                    zidanSpeed1 = 12;
                    shootObj.style.animation = "none";
                }, 10000)
            } else if (topShootObj+170 > topObj2+110 && topObj2+110 > topShootObj && leftShootObj+170 > leftObj2+110 && leftObj2+110 > leftShootObj && shootFasterObj.style.display==="block") {
                //alert("准备加射速100%");
                clearInterval(shoot100);
                //2号坦克和加强div有重叠
                $(shootFasterObj).css("transform", "scale(1.5)");
                $(shootFasterObj).css("transform", "scale(0.1)");
                setTimeout(function () {
                    shootFasterObj.style.display = "none";
                },300);
                //增加坦克外观效果
                zidanSpeed2 = 24;
                shootObj2.style.animation = "mymove2 20ms linear infinite";
                setTimeout(function () {//加强效果持续10s
                    //去掉外观效果
                    zidanSpeed2 = 12;
                    shootObj2.style.animation = "none";
                }, 10000)
            }

        }

        //获得对角移动
        function getMoveAcross() {
            //判断1号坦克是否有重叠
            let topObj1 = divObj.offsetTop;
            let leftObj1 = divObj.offsetLeft;
            let topObj2 = divObj2.offsetTop;
            let leftObj2 = divObj2.offsetLeft;
            let topMoveObj = moveOppositeObj.offsetTop;
            let leftMoveObj = moveOppositeObj.offsetLeft;
            if (topMoveObj+170 > topObj1+110 && topObj1+110 > topMoveObj && leftMoveObj+170 > leftObj1+110 && leftObj1+110 > leftMoveObj && moveOppositeObj.style.display==="block") {
                //alert("可以斜着跑了");
                clearInterval(moveOPP);
                //1号坦克和加强div有重叠
                $(moveOppositeObj).css("transform", "scale(1.5)");
                $(moveOppositeObj).css("transform", "scale(0.1)");
                setTimeout(function () {
                    moveOppositeObj.style.display = "none";
                },300);
                //增加坦克外观效果
                state = 1;
                bodyObj.style.animation = "mymove 20ms linear infinite";
                setTimeout(function () {//加强效果持续10s
                    //去掉外观效果
                    state = 0;
                    bodyObj.style.animation = "none";
                }, 10000)
            } else if (topMoveObj+170 > topObj2+110 && topObj2+110 > topMoveObj && leftMoveObj+170 > leftObj2+110 && leftObj2+110 > leftMoveObj && moveOppositeObj.style.display==="block") {
                //alert("可以斜着跑了");
                clearInterval(moveOPP);
                //2号坦克和加强div有重叠
                $(moveOppositeObj).css("transform", "scale(1.5)");
                $(moveOppositeObj).css("transform", "scale(0.1)");
                setTimeout(function () {
                    moveOppositeObj.style.display = "none";
                },300);
                //增加坦克外观效果
                state2 = 1;
                bodyObj2.style.animation = "mymove2 20ms linear infinite";
                setTimeout(function () {//加强效果持续10s
                    //去掉外观效果
                    state2 = 0;
                    bodyObj2.style.animation = "none";
                }, 10000)
            }
        }

        //获得加血包
        function getBlood() {
            //判断1号坦克是否有重叠
            let topObj1 = divObj.offsetTop;
            let leftObj1 = divObj.offsetLeft;
            let topObj2 = divObj2.offsetTop;
            let leftObj2 = divObj2.offsetLeft;
            let topPillObj = getPillObj.offsetTop;
            let leftPillObj = getPillObj.offsetLeft;
            if (topPillObj+170 > topObj1+110 && topObj1+110 > topPillObj && leftPillObj+170 > leftObj1+110 && leftObj1+110 > leftPillObj && getPillObj.style.display==="block") {
                //alert("可以斜着跑了");
                clearInterval(addBlood);
                //1号坦克和加强div有重叠
                $(getPillObj).css("transform", "scale(1.5)");
                $(getPillObj).css("transform", "scale(0.1)");
                setTimeout(function () {
                    getPillObj.style.display = "none";
                },300);
                //增加坦克外观效果
                blood.style.animation = "isShooted 400ms linear 2";
                if ($(blood).css("width") === "27px") {
                    $(blood).animate({width:"54px"}, 1000, "linear");
                }else if ($(blood).css("width") === "54px") {
                    $(blood).animate({width:"81px"}, 1000, "linear");
                }
            } else if (topPillObj+170 > topObj2+110 && topObj2+110 > topPillObj && leftPillObj+170 > leftObj2+110 && leftObj2+110 > leftPillObj && getPillObj.style.display==="block") {
                //alert("可以斜着跑了");
                clearInterval(addBlood);
                //2号坦克和加强div有重叠
                $(getPillObj).css("transform", "scale(1.5)");
                $(getPillObj).css("transform", "scale(0.1)");
                setTimeout(function () {
                    getPillObj.style.display = "none";
                },300);
                //增加坦克外观效果
                blood2.style.animation = "isShooted 400ms linear 2";
                if ($(blood2).css("width") === "27px") {
                    $(blood2).animate({width:"54px"}, 1000, "linear");
                }else if ($(blood2).css("width") === "54px") {
                    $(blood2).animate({width:"81px"}, 1000, "linear");
                }
            }
        }

        //激光开始
        function lightStart() {
            $(burnLightXObj).animate({height:winHeight + "px"},800,"linear",changeBack);
        }
        function changeBack() {
            setTimeout(function () {
                $(burnLightXObj).animate({height: "20px"}, 800, "linear",distroyLight);
            }, 2000)
        }
        function distroyLight() {
            $(burnLightXObj).css("display","none");
        }

        //更换背景颜色
        let color = 0;
        $(document).keydown(function (event) {
            color++;
            let keyNum = event.which;
            if (event.ctrlKey && keyNum === 88) {//ctrl+x
                if (color % 4 === 0) {
                    $(".father").css("background-color","#DEDDDD");
                    $("#divId").css("background-color","#DEDDDD");
                    $("#divId2").css("background-color","#DEDDDD");
                }else if (color % 4 === 1) {
                    $(".father").css("background-color","#FFCCA9");
                    $("#divId").css("background-color","#FFCCA9");
                    $("#divId2").css("background-color","#FFCCA9");
                }else if (color % 4 === 2) {
                    $(".father").css("background-color","#AAAEEB");
                    $("#divId").css("background-color","#AAAEEB");
                    $("#divId2").css("background-color","#AAAEEB");
                }else if (color % 4 === 3) {
                    $(".father").css("background-color","#98E0AD");
                    $("#divId").css("background-color","#98E0AD");
                    $("#divId2").css("background-color","#98E0AD");
                }else if (color % 4 === 3) {
                    $(".father").css("background-color","#60C5F1");
                    $("#divId").css("background-color","#60C5F1");
                    $("#divId2").css("background-color","#60C5F1");
                }
            }
        });
    });

    //重新开始
    function reloadPage() {
        window.location.reload();
    }
</script>
<div class="father">
    <!--移速-->
    <div id="moveFaster" class="dashed-box3" style="position:absolute;width: 60px;height: 60px;
                                                    border-radius: 30%;border: none;margin: 0;text-align: center;
                                                    padding: 0;overflow: hidden;display: none;transition: all 300ms">
        <div class="dashed-top3"></div>
        <div class="dashed-left3"></div>
        <div class="dashed-right3"></div>
        <div class="dashed-bottom3"></div>
        <h5 style="margin-top: 5px;margin-bottom:0;color: darkblue">移速+60%</h5>
        <h5 class="moveFaster" style="margin-top: 0;color: darkblue">(7s)</h5>
    </div>
    <!--射速-->
    <div id="shootFaster" class="dashed-box4" style="position:absolute;width: 60px;height: 60px;
                                                     border-radius: 30%;border: none;margin: 0;text-align: center;
                                                     padding: 0;overflow: hidden;display: none;transition: all 300ms">
        <div class="dashed-top4"></div>
        <div class="dashed-left4"></div>
        <div class="dashed-right4"></div>
        <div class="dashed-bottom4"></div>
        <h5 style="margin-top: 5px;margin-bottom:0;color: orangered">射速+60%</h5>
        <h5 class="shootFaster" style="margin-top: 0;color: orangered">(7s)</h5>
    </div>
    <!--对角移动-->
    <div id="moveOpposite" class="dashed-box5" style="position:absolute;width: 60px;height: 60px;
                                                     border-radius: 30%;border: none;margin: 0;text-align: center;
                                                     padding: 0;overflow: hidden;display: none;transition: all 300ms">
        <div class="dashed-top5"></div>
        <div class="dashed-left5"></div>
        <div class="dashed-right5"></div>
        <div class="dashed-bottom5"></div>
        <h5 style="margin-top: 15px;margin-bottom:0;color: goldenrod">对角移动</h5>
        <h5 class="moveOpposite" style="margin-top: 0;color: goldenrod">(7s)</h5>
    </div>
    <!--回复生命-->
    <div id="getPill" class="dashed-box6" style="position:absolute;width: 60px;height: 60px;
                                                     border-radius: 30%;border: none;margin: 0;text-align: center;
                                                     padding: 0;overflow: hidden;display: none;transition: all 300ms">
        <div class="dashed-top6"></div>
        <div class="dashed-left6"></div>
        <div class="dashed-right6"></div>
        <div class="dashed-bottom6"></div>
        <h5 style="margin-top: 15px;margin-bottom:0;color: green">回复生命</h5>
        <h5 class="getPill" style="margin-top: 0;color: green">(7s)</h5>
    </div>
    <!--激光效果-->
    <div id="burnLightX"></div>

    <!--1号坦克-->
    <div id="bloodTip">
        <div id="blood"></div>
    </div>
    <div id="divId">
        <div id="shootId"></div>
        <div id="bodyId" style="text-align: center;">
            <h2 style="color: red">1号</h2>
        </div>
        <div id="wheelId1" class="dashed-box">
            <div class="dashed-top"></div>
            <div class="dashed-left"></div>
            <div class="dashed-right"></div>
            <div class="dashed-bottom"></div>
        </div>
        <div id="wheelId2" class="dashed-box">
            <div class="dashed-top"></div>
            <div class="dashed-left"></div>
            <div class="dashed-right"></div>
            <div class="dashed-bottom"></div>
        </div>
    </div>

    <!--2号坦克-->
    <div id="bloodTip2">
        <div id="blood2"></div>
    </div>
    <div id="divId2">
        <div id="shootId2"></div>
        <div id="bodyId2" style="text-align: center;">
            <h2>2号</h2>
        </div>
        <div id="wheelId3" class="dashed-box2">
            <div class="dashed-top2"></div>
            <div class="dashed-left2"></div>
            <div class="dashed-right2"></div>
            <div class="dashed-bottom2"></div>
        </div>
        <div id="wheelId4" class="dashed-box2">
            <div class="dashed-top2"></div>
            <div class="dashed-left2"></div>
            <div class="dashed-right2"></div>
            <div class="dashed-bottom2"></div>
        </div>
    </div>
</div>

<div class="message">
    <a href="#" style="color: black" onclick="reloadPage()"><h3 style="margin-top: 12px">重新开始(3s)</h3></a>
</div>

<!-- 遮罩层 -->
<div class="cover"></div>

</body>
</html>